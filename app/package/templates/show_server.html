{% extends 'layout.html' %}
{% block scripts %}
    <script type="text/javascript" src="https://andywer.github.io/jquery-dim-background/jquery.dim-background.min.js"></script>
{% endblock scripts %}
{% block page_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/show_server.css') }}">
{% endblock page_css %}

{% block content %}
<!-- <div class="dj-image">
    <div class="dj-text">
        <div class="d-flex">
            <button class="btn btn-light">Request Song</button>
            <button class="btn btn-light ms-2">TIP</button>
        </div>
    </div>
    <div class="dj-video-text">
        <div class="d-flex">
            <span class="mt-1">&#128308;</span><h4>LIVE</h4>
        </div>
    </div>
</div>  -->
<div class="container-fluid">
        <iframe id="dj-iframe" width="100%" height="825" src="https://www.youtube.com/embed/rrYFx-6E7Ac?&autoplay=0&mute=1&controls=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <div class="row" id="hide-show-dj">
            <div class="col-lg-12 text-center" id="hide-show-dj-button">&#8593</div>
        </div>
</div>


<section id="live_chat">
    <div class="container mt-4">
        <h1 class="text-center" id="server-name">{{server.name}}</h1>
        <h1 class="text-center" id="server-chat-title">SERVER Chat (TEST)</h1>
        <h5 class="text-center" id="active-users-count">CONNECTED USERS: </h5>
        <div id="msg_container">
        </div>
        <div class="d-flex">
            <input type="text" class="form-control" id='msg' onkeyup="checkKey(event)">
            <button class="btn btn-primary">
                Send
            </button>
        </div>
    </div>
</section>

<section id="rooms">
        <h1 class="text-center mt-4">TABLES</h1>
        <div class="container" id="tables-container">
            <div class="row text-center">
                {% for room in server.rooms %}
                    <div class="round ms-5 mt-2">

                        <div class="round-text">
                            {{ room.name }}
                            <small class="room-users-count" id="table-{{room.id}}-users-count">users: {{room.clients|length}}</small>
                            <button data-link="{{ url_for('show_room', server_id=server.id, room_id=room.id) }}" class="btn join-table"><span>JOIN</span></button>
                        </div>
                    </div>
                {% endfor %}


                
            </div>
            
        </div>
</section>
<div class="container-fluid mt-3" id="user-table-container"></div>


<script src="https://cdn.socket.io/4.1.2/socket.io.min.js" integrity="sha384-toS6mmwu70G0fw54EGlWWeA4z3dyJ+dlXBtSURSKN4vyRFOcxd3Bzjj/AoOwY+Rg" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/show_server.js') }}"></script>



{% endblock content %}